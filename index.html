<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="https://cdn.mxpnl.com/libs/mixpanel-platform/css/reset.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.mxpnl.com/libs/mixpanel-platform/build/mixpanel-platform.v0.latest.min.css">
    <script src="https://cdn.mxpnl.com/libs/mixpanel-platform/build/mixpanel-platform.v0.latest.min.js"></script>
  </head>
  <body class="mixpanel-platform-body">
    <script>
      // replace with event name of your choice
      var eventName = 'Button clicked';                         
      // use segment query on eventName, and segment the data by country
      var $dau = MP.api.segment(eventName, 'mp_country_code', { 
        // 'from' date should be one month ago
        from: moment().subtract(30, 'days'),                    
        // 'to' date should be yesterday; partial data for today impacts DAU more than it does MAU
        to: moment().subtract(1, 'days'),                       
        // we want the number of button clicks for each day of the month
        unit: 'day',                                            
         // daily counts should be unique; multiple clicks by the same person in one day should be counted only once
        type: 'unique'                                         
      });
 // use segment query on eventName, and segment the data by country
      var $mau = MP.api.segment(eventName, 'mp_country_code', {
        // 'from' date should be one month ago
        from: moment().subtract(30, 'days'),        
        // 'to' date should be yesterday; partial data for today
        to: moment().subtract(1, 'days'),            
        impacts DAU more than it does MAU
        // we want the number of button clicks that occured over the month
        unit: 'month',                                          
        // multiple clicks by the same person during any point in the month should be counted only once
        type: 'unique'                                          
      });

      $.when($dau, $mau).done(function(dau, mau) {
        // average the DAU values and divide them by the MAU ones
        // (we sum the MAU in the case where the 30 days spans over two months)
        var dauMau = dau.avg().divide(mau.sum()).values();
        $('<div></div>').appendTo('body').MPChart({ // create chart
          chartType: 'bar',                         // make it a bar chart
          data: dauMau                              // set its data
        });
      });
    </script>
  </body>
</html>